(this["webpackJsonpcsv-uploader"]=this["webpackJsonpcsv-uploader"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var a,r,i,o,c,l,s,u,d,p,h,j,g,b,x,f=n(0),v=n.n(f),O=n(12),m=n.n(O),C=n(33),y=n(51),L=n(7),w=n.n(L),D=n(14),k=n(63),P=n(64),S=n(74),F=n(72),T=n(73),A=n(10),N=n(11),U=n(65),M=n.n(U),B=n.p+"static/media/left-arrow-active.75497405.svg",R=n.p+"static/media/left-arrow-inactive.be6a0b16.svg",E=n.p+"static/media/right-arrow-active.574b15af.svg",I=n.p+"static/media/right-arrow-inactive.48294948.svg",J=n(2),K=N.a.div(a||(a=Object(A.a)(["\n    display: flex;\n    flex-direction: row;\n    flex: 1;\n    justify-content: space-between;\n    \n    ul {\n        margin: 0;\n        padding: 0;\n        list-style-type: none;\n    }\n\n    li {\n        float: left !important;\n    }\n\n    .pagination li a {\n        color: #7d96a1;\n        background-color: white;\n        font-weight: bold;\n        padding: 5px 10px;\n        text-decoration: none;\n        transition: background-color .3s;\n        border: 1px solid #ddd;\n    }\n\n    .pagination li:first-child a {\n        border-top-left-radius: 10px;\n        border-bottom-left-radius: 10px;\n        font-weight: bold;\n    }\n\n    .pagination .disabled #prev {\n        content: url(",");\n    }\n\n    .pagination .disabled #next {\n        content: url(",");\n    }\n\n    .pagination .active a {\n        color: salmon;\n    }\n\n    .pagination li:last-child a {\n        border-top-right-radius: 10px;\n        border-bottom-right-radius: 10px;\n        font-weight: bold;\n    }\n"])),R,I),V=N.a.select(r||(r=Object(A.a)(["\n    border-radius: 10px;\n    border: 1px solid #ddd;\n    padding: 2px;\n    margin-top: -8px;\n    color: #7d96a1;\n    font-weight: bold;\n    outline: none;\n"]))),z=function(e){var t=e.pageRangeDisplayed,n=e.activePage,a=e.itemsCountPerPage,r=e.totalItemsCount,i=e.onChange,o=e.pageLimit,c=e.onPageLimitChange;return Object(J.jsxs)(K,{children:[Object(J.jsx)(M.a,{hideFirstLastPages:!0,pageRangeDisplayed:t,activePage:n,itemsCountPerPage:a,totalItemsCount:r,prevPageText:Object(J.jsx)("img",{src:B,id:"prev",alt:""}),nextPageText:Object(J.jsx)("img",{src:E,id:"next",alt:""}),onChange:i}),Object(J.jsxs)(V,{value:o||"25",onChange:function(e){return c(e.target.value)},label:"Age",children:[Object(J.jsx)("option",{disabled:!0,value:"",children:"Page Limit"}),Object(J.jsx)("option",{value:"25",children:"25"}),Object(J.jsx)("option",{value:"50",children:"50"}),Object(J.jsx)("option",{value:"100",children:"100"}),Object(J.jsx)("option",{value:"500",children:"500"})]})]})},Q=n(141),G=n(146),W=n(150),q=n(149),H=n(143),X=n(147),Y=n(148),Z=n(145),$=Object(Q.a)({table:{minWidth:650}}),_=N.a.div(i||(i=Object(A.a)(["\n  display: flex;\n  flex-direction: row;\n  height: calc(100vh - 300px);\n  overflow-y: auto;\n"]))),ee=N.a.div(o||(o=Object(A.a)(["\n  display: flex;\n  flex-direction: row;\n  gap: 4px;\n  align-items: center;\n"]))),te=N.a.div(c||(c=Object(A.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n"]))),ne=N.a.div(l||(l=Object(A.a)(["\n  width: 0;\n  height: 0;\n  cursor: pointer;\n  opacity: 0.2;\n\n  &:hover {\n    opacity: 1;\n  }\n"]))),ae=Object(N.a)(ne)(s||(s=Object(A.a)(["\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-bottom: 5px solid black;\n"]))),re=Object(N.a)(ne)(u||(u=Object(A.a)(["\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid black;\n"]))),ie=function(e){var t=e.data;return Object(J.jsx)(W.a,{children:t.map((function(e,t){return Object(J.jsxs)(Y.a,{children:[Object(J.jsx)(q.a,{children:e.country}),Object(J.jsx)(q.a,{align:"left",children:e.capital}),Object(J.jsx)(q.a,{align:"left",children:(n=e.population,n?Math.abs(Number(n))>=1e9?(Math.abs(Number(n))/1e9).toFixed(2)+"B":Math.abs(Number(n))>=1e6?(Math.abs(Number(n))/1e6).toFixed(2)+"M":Math.abs(Number(n))>=1e3?(Math.abs(Number(n))/1e3).toFixed(2)+"K":Math.abs(Number(n)):"")}),Object(J.jsx)(q.a,{align:"left",children:e.language}),Object(J.jsx)(q.a,{align:"left",children:e.president})]},t);var n}))})},oe=function(e){var t,n=$(),a=e.handleSortChange;return Object(J.jsx)(_,{children:Object(J.jsx)(H.a,{component:Z.a,children:Object(J.jsxs)(G.a,{className:n.table,size:"small","aria-label":"a dense table",children:[Object(J.jsx)(X.a,{children:Object(J.jsxs)(Y.a,{children:[Object(J.jsx)(q.a,{children:Object(J.jsxs)(ee,{children:["Country name",Object(J.jsxs)(te,{children:[Object(J.jsx)(ae,{onClick:function(){return a("country",1)}}),Object(J.jsx)(re,{onClick:function(){return a("country",-1)}})]})]})}),Object(J.jsx)(q.a,{align:"right",children:Object(J.jsxs)(ee,{children:["Capital",Object(J.jsxs)(te,{children:[Object(J.jsx)(ae,{onClick:function(){return a("capital",1)}}),Object(J.jsx)(re,{onClick:function(){return a("capital",-1)}})]})]})}),Object(J.jsx)(q.a,{align:"right",children:Object(J.jsxs)(ee,{children:["Approx (population)",Object(J.jsxs)(te,{children:[Object(J.jsx)(ae,{onClick:function(){return a("population",1)}}),Object(J.jsx)(re,{onClick:function(){return a("population",-1)}})]})]})}),Object(J.jsx)(q.a,{align:"right",children:Object(J.jsxs)(ee,{children:["National language",Object(J.jsxs)(te,{children:[Object(J.jsx)(ae,{onClick:function(){return a("language",1)}}),Object(J.jsx)(re,{onClick:function(){return a("language",-1)}})]})]})}),Object(J.jsx)(q.a,{align:"right",children:Object(J.jsxs)(ee,{children:["President",Object(J.jsxs)(te,{children:[Object(J.jsx)(ae,{onClick:function(){return a("president",1)}}),Object(J.jsx)(re,{onClick:function(){return a("president",-1)}})]})]})})]})}),(null===(t=e.data)||void 0===t?void 0:t.length)?Object(J.jsx)(ie,{data:e.data}):null]})})})},ce=n(69),le=n(153),se=n(155),ue=n(154),de=n(152),pe=n(151),he=n(156),je=n(70),ge=function(e){var t=e.open,n=e.csvData,a=e.onFileUpload,r=e.onRemoveFile,i=e.fileUploadAction,o=e.cancelAction;return Object(J.jsxs)(ue.a,{open:t,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(J.jsx)(he.a,{id:"alert-dialog-title",children:"Upload new CSV data"}),Object(J.jsx)(pe.a,{children:Object(J.jsx)(je.a,{onDrop:a,onRemoveFile:r,addRemoveButton:!0,noClick:!0,children:"Drop a CSV to upload"})}),Object(J.jsxs)(de.a,{children:[Object(J.jsx)(se.a,{onClick:o,color:"primary",children:"Cancel"}),Object(J.jsx)(se.a,{disabled:!n,onClick:i,color:"primary",autoFocus:!0,children:"Upload"})]})]})},be=N.a.div(d||(d=Object(A.a)(["\n  width: 90%;\n  max-width: 1200px;\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n  padding: 50px;\n  gap: 20px;\n  th {\n    font-weight: bold;\n  }\n"]))),xe=N.a.div(p||(p=Object(A.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n"]))),fe=N.a.div(h||(h=Object(A.a)(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  gap: 12px;\n"]))),ve=N.a.input(j||(j=Object(A.a)(["\n  border-radius: 10px;\n  border: 1px solid #ddd;\n  color: #7d96a1;\n  outline: none;\n  padding: 10px;\n  width: 100%;\n  max-width: 200px;\n"]))),Oe=N.a.select(g||(g=Object(A.a)(["\n  border-radius: 10px;\n  border: 1px solid #ddd;\n  color: #7d96a1;\n  font-weight: bold;\n  width: 100%;\n  max-width: 110px;\n  outline: none;\n"]))),me=N.a.div(b||(b=Object(A.a)(["\n  display: flex;\n  flex-direction: row;\n  gap: 10px;\n  a {\n    text-decoration: none !important;\n  }\n"]))),Ce=N.a.div(x||(x=Object(A.a)(["\n  border-radius: 10px;\n  outline: none;\n  color: #ffffff;\n  background-color: salmon;\n  cursor: pointer;\n  padding: 7px;\n  font-size: 12px;\n  text-align: center;\n  width: 80px;\n"]))),ye=[["country","capital","population","language","president"]],Le=function(e){var t,n,a,r,i,o,c,l,s,u,d,p,h,j,g=e.state,b=e.handleChange,x=e.handlePageChange,v=e.handlePageLimitChange,O=e.onFileUpload,m=e.uploadFileToDb,C=e.handleSearchTextChange,y=e.handleSortChange,L=e.handleFilterChange,w=e.removeAllCountries,D=Object(f.useState)(!1),k=Object(T.a)(D,2),P=k[0],S=k[1];return Object(J.jsxs)(be,{children:[Object(J.jsxs)(xe,{children:[Object(J.jsxs)(fe,{children:[Object(J.jsx)(ve,{placeholder:"Search...",onChange:function(e){return C(e.target.value)}}),Object(J.jsxs)(Oe,{value:null===(t=g.filters)||void 0===t?void 0:t.country,onChange:function(e){return L("country",e.target.value)},children:[Object(J.jsx)("option",{value:"ALL",children:"Country:all"}),(null===(n=g.filterData)||void 0===n||null===(a=n.country)||void 0===a?void 0:a.length)?g.filterData.country.map((function(e){return Object(J.jsx)("option",{value:e,children:e})})):null]}),Object(J.jsxs)(Oe,{value:null===(r=g.filters)||void 0===r?void 0:r.capital,onChange:function(e){return L("capital",e.target.value)},children:[Object(J.jsx)("option",{value:"ALL",children:"Capital:all"}),(null===(i=g.filterData)||void 0===i||null===(o=i.capital)||void 0===o?void 0:o.length)?g.filterData.capital.map((function(e){return Object(J.jsx)("option",{value:e,children:e})})):null]}),Object(J.jsxs)(Oe,{value:null===(c=g.filters)||void 0===c?void 0:c.population,onChange:function(e){return L("population",e.target.value)},children:[Object(J.jsx)("option",{value:"ALL",children:"Population:all"}),(null===(l=g.data)||void 0===l?void 0:l.length)&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("option",{value:"0-1000000",children:"0-10m"}),Object(J.jsx)("option",{value:"1000000-1000000000",children:"10m-1b"}),Object(J.jsx)("option",{value:"1000000000-100000000000",children:"1b-100b"}),Object(J.jsx)("option",{value:"100000000000-above",children:"100b-above"})]})]}),Object(J.jsxs)(Oe,{value:null===(s=g.filters)||void 0===s?void 0:s.language,onChange:function(e){return L("language",e.target.value)},children:[Object(J.jsx)("option",{value:25,children:"Language:all"}),(null===(u=g.filterData)||void 0===u||null===(d=u.language)||void 0===d?void 0:d.length)?g.filterData.language.map((function(e){return Object(J.jsx)("option",{value:e,children:e})})):null]}),Object(J.jsxs)(Oe,{value:null===(p=g.filters)||void 0===p?void 0:p.president,onChange:function(e){return L("president",e.target.value)},children:[Object(J.jsx)("option",{value:"",children:"President:all"}),(null===(h=g.filterData)||void 0===h||null===(j=h.president)||void 0===j?void 0:j.length)?g.filterData.president.map((function(e){return Object(J.jsx)("option",{value:e,children:e})})):null]})]}),Object(J.jsxs)(me,{children:[Object(J.jsx)(Ce,{onClick:w,children:"Clear data"}),Object(J.jsx)(ce.CSVLink,{filename:"csv-template.csv",data:ye,children:Object(J.jsx)(Ce,{children:"Template"})}),Object(J.jsx)(Ce,{onClick:function(){return S(!0)},children:"Upload"})]})]}),g.isLoading&&Object(J.jsx)(le.a,{}),Object(J.jsx)(oe,{data:g.data,handleSortChange:y}),Object(J.jsx)(z,{hideFirstLastPages:!0,pageRangeDisplayed:3,activePage:g.activePage,itemsCountPerPage:g.limit,totalItemsCount:g.dataCount,onChange:x,pageLimit:g.limit,onPageLimitChange:v}),Object(J.jsx)(ge,{open:P,csvData:g.csvData,onFileUpload:O,onRemoveFile:function(){return b("csvData","")},fileUploadAction:function(){S(!1),m()},cancelAction:function(){return S(!1)}})]})},we=function(){var e=Object(D.a)(w.a.mark((function e(t){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,fetch("http://localhost:3001/add-countries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch((function(e){return n=e}));case 3:return a=e.sent,e.abrupt("return",n?Promise.reject(n):Promise.resolve(a.json()));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(D.a)(w.a.mark((function e(t){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,fetch("http://localhost:3001/get-countries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch((function(e){return n=e}));case 3:return a=e.sent,e.abrupt("return",n?Promise.reject(n):Promise.resolve(a.json()));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(D.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,fetch("http://localhost:3001/get-filters",{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){return t=e}));case 3:return n=e.sent,e.abrupt("return",t?Promise.reject(t):Promise.resolve(n.json()));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(D.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,fetch("http://localhost:3001/remove-countries",{method:"DELETE",headers:{"Content-Type":"application/json"}}).catch((function(e){return t=e}));case 3:return n=e.sent,e.abrupt("return",t?Promise.reject(t):Promise.resolve(n.json()));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(e){Object(S.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(k.a)(this,n),(a=t.call(this,e)).initiateData=function(){a.getData(),a.getFilters()},a.componentDidMount=function(){return a.initiateData()},a.handlePageChange=function(){var e=Object(D.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({activePage:t,skip:(t-1)*a.state.limit});case 2:a.getData(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handlePageLimitChange=function(){var e=Object(D.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({activePage:1,limit:Number(t)||25});case 2:a.getData(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSearchTextChange=function(){var e=Object(D.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({searchText:t});case 2:a.callFuncDelay();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.callFuncDelay=function(e,t){var n;return function(){var a=this,r=arguments;clearTimeout(n),n=setTimeout((function(){return e.apply(a,r)}),t)}}((function(){return a.getData(!1)}),500),a.handleSortChange=function(){var e=Object(D.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({sortBy:{key:t,value:n}});case 2:a.getData(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.handleFilterChange=function(){var e=Object(D.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({filters:Object(y.a)(Object(y.a)({},a.state.filters),{},Object(C.a)({},t,n))});case 2:a.getData(!1);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.isFilterChange=function(){var e=!1,t=a.state.filters;return(a.state.searchText&&a.state.searchText.trim()||""!==t.country&&"ALL"!==t.country||""!==t.capital&&"ALL"!==t.capital||""!==t.population&&"ALL"!==t.population||""!==t.language&&"ALL"!==t.language||""!==t.president&&"ALL"!==t.president)&&(e=!0,a.setState({activePage:1,skip:0})),e},a.getDataQuery=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a.state,n=t.filters,r=t.sortBy,i={skip:e?(a.state.activePage-1)*a.state.limit:a.isFilterChange()?0:(a.state.activePage-1)*a.state.limit,limit:a.state.limit};return a.state.searchText&&a.state.searchText.trim()&&(i.searchKeys=["country","capital","language","president"],i.searchKeyword=a.state.searchText),""!==n.country&&"ALL"!==n.country&&(i.country=n.country),""!==n.capital&&"ALL"!==n.capital&&(i.capital=n.capital),""!==n.population&&"ALL"!==n.population&&(i.population=n.population),""!==n.language&&"ALL"!==n.language&&(i.language=n.language),""!==n.president&&"ALL"!==n.president&&(i.president=n.president),r.key&&(i.sortBy=r),i},a.getData=Object(D.a)(w.a.mark((function e(){var t,n,r,i,o,c,l=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(l.length>0&&void 0!==l[0])||l[0],a.setState({isLoading:!0}),e.next=4,De(a.getDataQuery(r)).catch((function(e){return console.log("error   ",e)}));case 4:if(i=e.sent,a.setState({isLoading:!1}),null===i||void 0===i?void 0:i.responseData){e.next=8;break}return e.abrupt("return");case 8:o=null===(t=i.responseData)||void 0===t?void 0:t.countries,c=null===(n=i.responseData)||void 0===n?void 0:n.count,a.setState({data:o,dataCount:c});case 11:case"end":return e.stop()}}),e)}))),a.getFilters=Object(D.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.next=3,ke().catch((function(e){return console.log("error   ",e)}));case 3:if(n=e.sent,a.setState({isLoading:!1}),null===n||void 0===n||null===(t=n.responseData)||void 0===t?void 0:t.length){e.next=7;break}return e.abrupt("return");case 7:a.setState({filterData:n.responseData[0]});case 8:case"end":return e.stop()}}),e)}))),a.handleChange=function(e,t){e&&a.setState(Object(C.a)({},e,t))},a.onFileUpload=function(e){e&&a.setState({csvData:e})},a.uploadFileToDb=Object(D.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),console.log({csvData:JSON.stringify(a.state.csvData)}),e.next=4,we(a.state.csvData).catch((function(e){return console.log("error   ",e)}));case 4:a.initiateData();case 5:case"end":return e.stop()}}),e)}))),a.removeAllCountries=Object(D.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoading:!0}),e.next=3,Pe().catch((function(e){return console.log("error   ",e)}));case 3:a.initiateData();case 4:case"end":return e.stop()}}),e)}))),a.state={data:"",filterData:"",dataCount:0,searchText:"",filters:{country:"ALL",capital:"ALL",population:"ALL",language:"ALL",president:"ALL"},sortBy:{key:"",value:-1},activePage:1,limit:25,skip:0,csvData:"",isLoading:!1},a}return Object(P.a)(n,[{key:"render",value:function(){return Object(J.jsx)(Le,{state:this.state,handlePageChange:this.handlePageChange,handleChange:this.handleChange,onFileUpload:this.onFileUpload,uploadFileToDb:this.uploadFileToDb,handlePageLimitChange:this.handlePageLimitChange,handleSearchTextChange:this.handleSearchTextChange,handleSortChange:this.handleSortChange,handleFilterChange:this.handleFilterChange,removeAllCountries:this.removeAllCountries})}}]),n}(f.Component),Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,157)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))};m.a.render(Object(J.jsx)(v.a.StrictMode,{children:Object(J.jsx)(Se,{})}),document.getElementById("root")),Fe()},97:function(e,t){},99:function(e,t){}},[[109,1,2]]]);
//# sourceMappingURL=main.c4231979.chunk.js.map